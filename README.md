# Live Search Buggy Starter

A Next.js live search application demo with TypeScript and TailwindCSS.

## Features

- Real-time search functionality
- Course database with filtering
- Responsive design
- TypeScript support

## Getting Started

1. Install dependencies:

```bash
npm install
```

2. Copy environment variables:

```bash
cp .env.example .env.local
```

3. Run the development server:

```bash
npm run dev
```

4. Open [http://localhost:3000](http://localhost:3000) in your browser.

## Project Structure

- `app/` - Next.js app router pages and API routes
- `components/` - React components
- `data/` - JSON data files
- `app/api/search/` - Search API endpoint

## Tech Stack

- Next.js 14 (App Router)
- TypeScript
- TailwindCSS
- React Hooks

## API Endpoints

- `GET /api/search?q=term` - Search for courses

## Bug Fixes & Optimizations

### Hydration Errors

#### Hydration Error 1: Non-deterministic Key
**Error:** `Warning: Text content did not match. Server: "49888.26" Client: "50055.56"`

**Cause:** Using a non-deterministic key (`key={Math.random()}`) in the `Search` component when rendering search results.

**Solution:** Use a stable and unique key for each result item, specifically `key={result.id}`.

#### Hydration Error 2: Non-deterministic Calculation in Render
**Error:** `Warning: Text content did not match. Server: "50068.11" Client: "50033.70"`

**Cause:** The value for `calculatedValue` was generated by calling a random calculation directly in the render.

**Solution:** Move the random calculation into a `useEffect` and store the result in state.

### Logic & Optimization Issues

#### 1. Missing Debouncing
**Issue:** API calls were made on every keystroke, causing excessive network requests.

**Solution:** Implemented debounced search with 300ms delay using lodash debounce function.

#### 2. Memory Leaks
**Issue:** Debounced function wasn't cleaned up on component unmount.

**Solution:** Added cleanup in useEffect to cancel pending debounced calls.

#### 3. Missing Input Validation
**Issue:** API endpoint didn't validate query parameters properly.

**Solution:** Added comprehensive input validation and error handling in the API route.

#### 4. Poor Error Handling
**Issue:** Network errors and API failures weren't handled gracefully.

**Solution:** Added try-catch blocks, proper error states, and user-friendly error messages.

#### 5. Inefficient Re-renders
**Issue:** Functions were recreated on every render, causing unnecessary re-renders.

**Solution:** Wrapped functions with `useCallback` and expensive calculations with `useMemo`.

#### 6. Weak Search Algorithm
**Issue:** Simple string matching without relevance scoring.

**Solution:** Implemented scoring system that prioritizes title matches over description matches.

#### 7. No Result Limiting
**Issue:** Large datasets could cause performance issues and slow rendering.

**Solution:** Limited search results to 50 items maximum.

#### 8. Missing Accessibility
**Issue:** Search input lacked proper ARIA labels and error announcements.

**Solution:** Added `aria-label` and `role="alert"` for better screen reader support.

#### 9. No Loading States
**Issue:** Users had no feedback during search operations.

**Solution:** Added loading spinner and search statistics display.

#### 10. Missing Cache Headers
**Issue:** API responses weren't cached, causing unnecessary server load.

**Solution:** Added appropriate cache headers to the API response.

## Performance Improvements

- **Debounced Search**: Reduces API calls by 80-90%
- **Memoization**: Prevents unnecessary re-calculations
- **Result Limiting**: Ensures consistent performance with large datasets
- **Caching**: Improves response times for repeated searches
- **Relevance Scoring**: Better search results ranking

## Development

The search functionality includes:

- Live search as you type with debouncing
- Course filtering by title, description, category, and instructor
- Relevance-based result ranking
- Loading states and comprehensive error handling
- Responsive UI with TailwindCSS
- Accessibility features for screen readers